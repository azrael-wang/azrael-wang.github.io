<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" id="viewport"
    content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no,viewport-fit:contain">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="中国物理科学研究院研究生院">
  <meta name="keyword" content="中国物理科学研究院研究生院">
  <title>中国物理科学研究院研究生院</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/cssreset.css">
  <link rel="stylesheet" href="../css/personelInfoBase.css">
  <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="../js/layui/css/layui.css">
  <link rel="stylesheet" href="../css/studentEditorPage.css">
   <script>
    ! function () {
      function a() {
        var dw = 1440; //设计稿尺寸
        var viewport = document.getElementById('viewport');
        viewport.setAttribute('content', 'width=' + dw + ', user-scalable=no,viewport-fit:contain')
      }

      var b = null;
      window.addEventListener('resize', function () {
        clearTimeout(b);
        b = setTimeout(a, 600)
      }, !1);
      a()
    }(window);
  </script>

  <!-- Bootstrap -->
  <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
  <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
  <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->
</head>

<body>
  <!-- 顶部 -->
  <header>
    <!-- 版心盒子 -->
    <div class="wrapBox wrap">
      <!-- logo -->
      <div class="logo fl">
        <a href="../index.html" style="display: block; height: 100%;" title="访问官网主页"><img src="../img/bottom_logo.png"
            alt=""></a>
      </div>
      <!-- 登陆信息 -->
      <div class="islogin fr">
        <button name="islogin" onclick=logOut()>退出</button>
      </div>
    </div>
  </header>
  <!-- 内容区域 -->
  <!-- 内容区域 -->
  <section class="wrap">
    <!-- 外部容器 -->
    <!-- 版心容齐 -->
    <div class="layui-container">
      <div class="layui-row mt64 mb32">

        <div class="layui-col-md12">
          <h2>学生基本信息</h2>
        </div>
      </div>
      <div class="layui-row">
        <form class="layui-form" action="">

          <!-- 左侧布局 -->
          <div class="layui-col-md6">
            <!-- 姓名 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">姓名<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="name" lay-verify="required" placeholder="姓名" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 性别 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">性别<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="radio" lay-verify="required" name="sex" value="男" title="男">
                <input type="radio" lay-verify="required" name="sex" value="女" title="女" checked>
              </div>
            </div>
            <!-- 专业 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">专业<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="specialty" lay-verify="required" placeholder="专业" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 学号 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">学号<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="studentnumber" lay-verify="required" placeholder="学号" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 民族 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">民族<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="nation" lay-verify="required" placeholder="民族" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 籍贯 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">籍贯<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="nativeplace" lay-verify="required" placeholder="籍贯" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 政治面貌 -->
            <div class="layui-form-item layui-col-md12">
              <label class="layui-form-label layui-col-md6">政治面貌<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6 ">
                <input type="radio" lay-verify="required" name="politicsstatus" lay-filter="party" value="群众"
                  title="群众">
                <input type="radio" lay-verify="required" name="politicsstatus" lay-filter="party" value="团员"
                  title="团员">
                <input type="radio" lay-verify="required" name="politicsstatus" lay-filter="party" value="预备党员"
                  title="预备党员">
                <input type="radio" lay-verify="required" name="politicsstatus" lay-filter="party" value="党员"
                  title="党员">
                <input type="radio" lay-verify="required" name="politicsstatus" lay-filter="party" value="其他"
                  title="其他">
              </div>
            </div>
            <!-- 入党入团时间 -->
            <div class="layui-form-item layui-col-md10 ">
              <label id="entryDang" class="layui-form-label layui-col-md8 ">入党入团时间</label>
              <div class="layui-input-block layui-col-md6">
                <!-- 注意：这一层元素并不是必须的 -->
                <input type="text" name="politicsstatusentrytime" class="layui-input layui-hide" id="joinTheParty">
              </div>
            </div>
            <!-- 联系电话 -->
            <div class="layui-form-item layui-col-md12">
              <label class="layui-form-label layui-col-md6">联系电话<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md5">
                <input type="text" name="contactnumber" lay-verify="required" placeholder="联系电话" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 移动电话 -->
            <div class="layui-form-item layui-col-md12">
              <label class="layui-form-label layui-col-md6">移动电话<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md5">
                <input type="text" name="mobiletelephone" lay-verify="phone" placeholder="移动电话" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 上传图片 -->
            <div class="layui-form-item layui-col-md10">

              <div class="layui-upload">
                <button type="button" class="layui-btn layui-btn-normal" id="StuUpload"><i
                    class="layui-icon">&#xe67c;</i>上传图片</button>
                <div class="layui-upload-list textRight clearfix">
                  <img class="layui-upload-img fl" id="showPicture" style="display:block;width:136px;height:180px">
                  <p id="displayPicture"></p>
                  <div class="fl" style="margin:70px">
                    <span style="color:#222; font-size:14px;">推荐尺寸:&nbsp;&nbsp;宽度136 x 高度 180</span>
                    <p style="color:#222; font-size:14px; margin-top:24px">支持格式:pg|png|gif|bmp|jpeg</p>
                  </div>

                </div>
              </div>
            </div>


            <!-- 学生信息 -->
            <div class="layui-row">

            </div>
            <!-- 导师 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">导师<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="tutor" lay-verify="required" placeholder="导师姓名" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 导师电话 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">导师电话</label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="tutorphone" placeholder="导师电话" autocomplete="off" class="layui-input">
              </div>
            </div>
            <!-- 班级 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">班级<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="grade" lay-verify="required" placeholder="班级" autocomplete="off"
                  class="layui-input">
              </div>
            </div>
            <!-- 入学时间 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">入学时间<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <!-- 注意：这一层元素并不是必须的 -->
                <input type="text" lay-verify="required" name="timeofenrollment" class="layui-input"
                  id="timeOfEnrollment">
              </div>
            </div>
            <!-- 毕业时间 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">毕业时间<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <!-- 注意：这一层元素并不是必须的 -->
                <input type="text" lay-verify="required" name="timeofgraduation" class="layui-input "
                  id="TimeOfGraduation">
              </div>
            </div>
            <!-- 电子邮箱 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">电子邮箱<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="email" lay-verify="email" placeholder="电子邮箱" autocomplete="off"
                  class="layui-input">
              </div>
            </div>




          </div>
          <!-- 右侧布局 -->
          <div class="layui-col-md6 ">
            <!-- 婚姻状况 -->
            <div class="layui-form-item layui-col-md10 ">
              <label class="layui-form-label layui-col-md6 textLeft">婚姻状况</label>
              <div class="layui-input-block layui-col-md6">
                <input type="radio" lay-verify="required" name="ismarriage" value="true" title="已婚">
                <input type="radio" lay-verify="required" name="ismarriage" value="flase" title="未婚" checked>
              </div>
            </div>
            <!-- 是否在职读研 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6 textLeft">是否在职读研</label>
              <div class="layui-input-block layui-col-md6">
                <input type="radio" name="ispostgraduatestudy" value="true" title="是">
                <input type="radio" name="ispostgraduatestudy" value="flase" title="否" checked>
              </div>
            </div>
            <!-- 考试方式 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6 textLeft">考试方式<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <select name="examination" lay-verify="required" id="ksfs" lay-verify="required">
                  <option value="">考试方式</option>
                  <option value="1">推免</option>
                  <option value="2">硕士统考</option>
                  <option value="3">硕士调剂</option>
                  <option value="4">博士申请审核制</option>
                  <option value="5">博士统考</option>
                  <option value="6">硕博连读</option>
                  <option value="7">直博生</option>
                </select>
              </div>
            </div>

            <!-- 培养方式 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6 textLeft">培养方式<span style="color:red">*</span></label>
              <div class="layui-input-block layui-col-md6">
                <select name="educationselect" lay-verify="required" id="pyfs" lay-verify="required">
                  <option value="">请选择培养方式</option>
                  <option value="1">硕士</option>
                  <option value="2">博士</option>
                  <option value="3">直博</option>
                  <option value="4">硕转博</option>
                </select>
              </div>
            </div>
            <!-- 课程阶段地点 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6 textLeft">课程阶段地点</label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="studyaddress" placeholder="课程阶段学习地点" autocomplete="off" class="layui-input">
              </div>
            </div>
              <!-- 论文阶段地点 -->
              <div class="layui-form-item layui-col-md10">
                <label class="layui-form-label layui-col-md6 textLeft">论文阶段地点</label>
                <div class="layui-input-block layui-col-md6">
                  <input type="text" name="thesisstage" placeholder="论文阶段学习地点" autocomplete="off" class="layui-input">
                </div>
              </div>
            <!-- 培养单位全称 -->
            <div class="layui-form-item layui-col-md10">
              <label class="layui-form-label layui-col-md6">培养单位全称</label>
              <div class="layui-input-block layui-col-md6">
                <input type="text" name="cultivate" placeholder="培养单位全称" autocomplete="off" class="layui-input">
              </div>
            </div>
            <!-- 身份证 -->
            <table class="layui-table styleNone textLeft">
              <colgroup>
                <col width="195">
              </colgroup>
              <tbody>
                <tr>
                  <td>身份证<span style="color:red">*</span></td>
                  <td>
                    <!-- 身份证 -->
                    <div class=" layui-col-md8">

                      <input type="text" name="identitycard" lay-verify="identity" placeholder="身份证号码"
                        autocomplete="off" class="layui-input">

                    </div>
                  </td>
                </tr>
                <tr>
                  <td> 有效期</td>
                  <td>
                    <div class="layui-inline layui-col-md4 mr20">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="identitycardentity" class="layui-input" id="identityCardEntry"
                        placeholder="起始时间">
                    </div>

                    <div class="layui-inline layui-col-md4">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="identitycarend" class="layui-input" id="identityCardEnd"
                        placeholder="截止时间">
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- 护照 -->
            <table class="layui-table styleNone textLeft">
              <colgroup>
                <col width="195">
                <col>
              </colgroup>
              <tbody>
                <tr>
                  <td>护照</td>
                  <td>
                    <!-- 护照 -->
                    <div class="layui-form-item layui-col-md8">

                      <input type="text" name="protection" placeholder="护照号码" autocomplete="off" class="layui-input">

                    </div>
                  </td>
                </tr>
                <tr>
                  <td> 有效期</td>
                  <td>
                    <div class="layui-inline layui-col-md4 mr20">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="protectionentry" class="layui-input" id="protectionEntry"
                        placeholder="起始时间">
                    </div>

                    <div class="layui-inline layui-col-md4">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="protectionend" class="layui-input" id="protectionEnd" placeholder="截止时间">
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- 港澳通行证 -->
            <table class="layui-table styleNone textLeft">
              <colgroup>
                <col width="195">
                <col>
              </colgroup>
              <tbody>
                <tr>
                  <td>港澳通行证</td>
                  <td>
                    <!-- 港澳通行证 -->
                    <div class="layui-form-item layui-col-md8">

                      <input type="text" name="hkandmacao" placeholder="港澳通行证号码" autocomplete="off" class="layui-input">

                    </div>
                  </td>
                </tr>
                <tr>
                  <td> 有效期</td>
                  <td>
                    <div class="layui-inline layui-col-md4 mr20">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="hkandmacaoentry" class="layui-input" id="hkAndMacaoEntry"
                        placeholder="起始时间">
                    </div>

                    <div class="layui-inline layui-col-md4 ">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="hkandmacaoend" class="layui-input" id="hkAndMacaoEnd" placeholder="截止时间">
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- 台胞证 -->
            <table class="layui-table styleNone textLeft">
              <colgroup>
                <col width="195">
                <col>
              </colgroup>
              <tbody>
                <tr>
                  <td>台胞证</td>
                  <td>
                    <!-- 台胞证 -->
                    <div class="layui-form-item layui-col-md8">

                      <input type="text" name="taiwan" placeholder="台胞证号码" autocomplete="off" class="layui-input">

                    </div>
                  </td>
                </tr>
                <tr>
                  <td> 有效期</td>
                  <td>
                    <div class="layui-inline layui-col-md4 mr20">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="taiwanentry" class="layui-input" id="taiwanEntry" placeholder="起始时间">
                    </div>

                    <div class="layui-inline layui-col-md4">
                      <!-- 注意：这一层元素并不是必须的 -->
                      <input type="text" name="taiwanend" class="layui-input" id="taiwanEnd" placeholder="截止时间">
                  </td>
                </tr>
              </tbody>
            </table>


          </div>

          <!-- 学历 -->
          <div class="layui-col-md12">
            <button type="button" class="layui-btn layui-btn-primary"
              onclick="addTEducationTr('educationEntryTimeTable','educationEntryTime','educationEndTime','education','academy','profession')">添加行</button>
          </div>

          <table class="layui-table ">
            <thead>
              <tr>
                <th colspan=6>
                  本科及以上学历（院校、专业、入学时间、毕业时间)
                </th>
              </tr>
              <tr>
                <th>学历<span style="color:red">*</span></th>
                <th>院校<span style="color:red">*</span></th>
                <th>专业<span style="color:red">*</span></th>
                <th>入学时间<span style="color:red">*</span></th>
                <th>毕业时间<span style="color:red">*</span></th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="educationEntryTimeTable">
              <tr>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" lay-verify="required" name="education0" placeholder="学历" autocomplete="off"
                      class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" lay-verify="required" name="academy0" placeholder="院校" autocomplete="off"
                      class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" lay-verify="required" name="profession0" placeholder="专业" autocomplete="off"
                      class="layui-input">
                  </div>
                </td>
                <td>
                  <div class="layui-inline layui-col-md12">
                    <!-- 注意：这一层元素并不是必须的 -->
                    <input type="text" lay-verify="required" name="educationentrytime0" class="layui-input"
                      id="educationEntryTime0">
                  </div>
                </td>
                <td>
                  <div class="layui-inline layui-col-md12">
                    <!-- 注意：这一层元素并不是必须的 -->
                    <input type="text" lay-verify="required" name="educationendtime0" class="layui-input"
                      id="educationEndTime0">
                  </div>
                </td>
                <td>
                  <button class="layui-btn layui-btn-disabled">删除</button>
                </td>

              </tr>

            </tbody>



          </table>

          <!-- 工作经历 -->
          <div class="layui-col-md12">
            <button type="button" class="layui-btn layui-btn-primary"
              onclick="addTableTr('workEntryTimeTable','workEntryTime','workEndTime','workUnit','station')">添加行</button>
          </div>
          <table class="layui-table ">
            <thead>
              <tr>
                <th colspan=5>工作经历</th>
              </tr>
              <tr>
                <th>工作单位</th>
                <th>岗位</th>
                <th>入职时间</th>
                <th>离职时间</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="workEntryTimeTable">
              <tr>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="workunit0" placeholder="工作单位" autocomplete="off" class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="station0" placeholder="岗位" autocomplete="off" class="layui-input">
                  </div>
                </td>
                <td>
                  <div class="layui-inline layui-col-md12">
                    <!-- 注意：这一层元素并不是必须的 -->
                    <input type="text" name="workentrytime0" class="layui-input" id="workEntryTime0">
                  </div>
                </td>
                <td>
                  <div class="layui-inline layui-col-md12">
                    <!-- 注意：这一层元素并不是必须的 -->
                    <input type="text" name="workendtime0" class="layui-input" id="workEndTime0">
                  </div>
                </td>
                <td>

                  <button class="layui-btn layui-btn-disabled">删除</button>
                </td>

              </tr>


            </tbody>


          </table>

          <!-- 家庭主要成员 -->
          <div class="layui-col-md12">
            <button type="button" class="layui-btn layui-btn-primary"
              onclick="addFamliyTr('familyTable','familyName','familyRelation','familyWorkUnit','familyDuty','familyTel')">添加行</button>
          </div>
          <table class="layui-table ">
            <thead>
              <tr>
                <th colspan=6>家庭主要成员</th>
              </tr>
              <tr>
                <th>姓名<span style="color:red">*</span></th>
                <th>亲属关系<span style="color:red">*</span></th>
                <th>工作单位<span style="color:red">*</span></th>
                <th>职务身份<span style="color:red">*</span></th>
                <th>电话<span style="color:red">*</span></th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="familyTable">
              <tr>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="familyname0" placeholder="姓名" autocomplete="off" lay-verify="required"
                      class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="familyrelation0" placeholder="亲属关系" autocomplete="off"
                      lay-verify="required" class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="familyworkunit0" placeholder="工作单位" autocomplete="off"
                      lay-verify="required" class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="familyduty0" placeholder="职务身份" autocomplete="off" lay-verify="required"
                      class="layui-input">
                  </div>
                </td>
                <td>
                  <div class=" layui-col-md12">
                    <input type="text" name="familytel0" placeholder="电话" autocomplete="off" class="layui-input">
                  </div>
                </td>

                <td>
                  <button class="layui-btn layui-btn-disabled">删除</button>
                </td>

              </tr>

            </tbody>

          </table>


          <!-- 在校期间奖惩情况（500字以内) -->
          <div class="layui-row mar24" style="color:#222">
            <div class="layui-col-xs6 layui-col-sm6 layui-col-xs-offset1 ">
              在校期间奖惩情况（500字以内)
            </div>
          </div>
          <div class="layui-form-item layui-form-text ">
            <!-- <label class="layui-form-label"></label> -->
            <div class="layui-input-block layui-col-md10">
              <textarea name="atschool"   class="layui-textarea"></textarea>
            </div>
          </div>
          <!-- 学籍变动情况（300字以内） -->
          <div class="layui-row mar24" style="color:#222">
            <div class="layui-col-xs6 layui-col-sm6 layui-col-xs-offset1 ">
              学籍变动情况（300字以内
            </div>
          </div>
          <div class="layui-form-item layui-form-text ">
            <!-- <label class="layui-form-label">学籍变动情况（300字以内）</label> -->
            <div class="layui-input-block layui-col-md10">
              <textarea name="schoolroll"   class="layui-textarea"></textarea>
            </div>
          </div>
          <!-- 入学前奖惩/担任学生干部情况（500字以内） -->
          <div class="layui-row mar24" style="color:#222">
            <div class="layui-col-xs6 layui-col-sm6 layui-col-xs-offset1 ">
              入学前奖惩/担任学生干部情况（500字以内）
            </div>
          </div>
          <div class="layui-form-item layui-form-text ">
            <!-- <label class="layui-form-label">入学前奖惩/担任学生干部情况（500字以内）</label> -->
            <div class="layui-input-block layui-col-md10">
              <textarea name="takeoffice"   class="layui-textarea"></textarea>
            </div>
          </div>

          <!-- 提交按钮重置 -->
          <div class="layui-form-item">
            <div class="layui-input-block">
              <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
              <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
          </div>

        </form>
      </div>



    </div>

    </div>

    </div>
    </div>
    </div>

    </div>
  </section>
  <!-- 友情链接 -->
  <div class="friendlyLink ">
    <ul class="clearfix wrap">
      <li name="friendlyLink"><span>友情链接:</span></li>
      <li name="friendlyLink"><a href="#">中国工程物理研究院</a></li>
      <li name="friendlyLink"><a href="#">中国工程物理研究院研究生院</a></li>
      <li name="friendlyLink"><a href="#">北京计算科学研究中心</a></li>
    </ul>
  </div>
  <script src="../js/common.js"></script>
  <script src="../js/jquery-1.12.3.js"></script>
  <script src="../js/layui/layui.all.js"></script>
  <!-- <script src="../js/studentModify.js"></script> -->
  <script>
    layui.use('laydate', function () {
      var laydate = layui.laydate;
      var $ = layui.jquery
      //执行一个laydate实例
      //入学时间
      laydate.render({
        elem: '#TimeOfGraduation' //指定元素


      });
      // 毕业时间
      laydate.render({
        elem: '#timeOfEnrollment' //指定元素


      });
      // 入职时间
      laydate.render({
        elem: '#LeftEntry' //指定元素


      });
      // 离职时间
      laydate.render({
        elem: '#LeftLeave' //指定元素


      });
      // 入党时间
      laydate.render({
        elem: '#joinTheParty' //指定元素


      });
      // 身份证开始
      laydate.render({
        elem: '#identityCardEntry' //指定元素


      });
      // 身份证结束
      laydate.render({
        elem: '#identityCardEnd' //指定元素


      });
      // 护照开始
      laydate.render({
        elem: '#protectionEntry' //指定元素


      });
      // 护照结束
      laydate.render({
        elem: '#protectionEnd' //指定元素


      }); // 港澳通行证开始
      laydate.render({
        elem: '#hkAndMacaoEntry' //指定元素


      });
      // 港澳通行证结束
      laydate.render({
        elem: '#hkAndMacaoEnd' //指定元素


      }); // 身份证开始
      laydate.render({
        elem: '#taiwanEntry' //指定元素


      });
      // 身份证结束
      laydate.render({
        elem: '#taiwanEnd' //指定元素


      });

      // 工作和学历时间开启初始化使用
      for (var i = 0; i < 1; i++) {
        laydate.render({
          elem: '#educationEntryTime' + i //指定元素


        });
        laydate.render({
          elem: '#educationEndTime' + i //指定元素


        });
        laydate.render({
          elem: '#workEntryTime' + i //指定元素


        });
        laydate.render({
          elem: '#workEndTime' + i //指定元素


        });
      }

    });

    //获取userid
    var str = window.location.href
    var index = str.indexOf("=")
    var userid = str.substr((index + 1), 1)
    var typeIndex = str.lastIndexOf("=")
    var type = str.substr((typeIndex + 1), 1)
    //获取用户信息
    getInfor(userid)

    function getInfor(userid) {
      $.ajax({
        url: baseUrl + "sys/stuinput/byid",
        data: {
          userid: sessionStorage.getItem("loginUserId")
        },
        type: "POST",
        success: function (res) {
          console.log(res)
          if (res.code == 0) {
            console.log(res.stu[0].id)
            window.ModifiyId = res.stu[0].id
            window.ModifyUeserId = res.stu[0].userid
            window.imgurl = res.stu[0].url
            $("#showPicture").attr('src', res.stu[0].url)
            var data = res.stu[0]

            // data = handleData(data)
            console.log("回显数据first")
            console.log(data)
            //处理回显表格处理  创建dom
            //工作经历
            handleStructure("workEntryTimeTable", data.workunit)
            //学历
            handleFamilyStructure("educationEntryTimeTable", data.education)
            //家庭成员
            handleFamilyStructure("familyTable", data.family)
            //解构学历工作经历家庭成员
            //学历
            structure(data, data.education)
            //家庭成员
            structure(data, data.family)
            //工作经历
            structure(data, data.workunit)

            //拿到页面中所有带name tdDom元素 
            var tdDom = $("input[name]")
            var textareaDom = $("textarea[name]")
            //遍历每个dom和请求的结果数据比对，进行渲染.
            tdDom.each(function (index, item) {
              var name = $(item).attr("name")
              var val = ""
              if (data[name] != null && data[name] != undefined) {
                val = data[name].replace(/00:00:00/g, "")
              }
              $(item).val(val)
            })
            //遍历文本框
            textareaDom.each(function (index, item) {
              var name = $(item).attr("name")
              var val = ""
              if (data[name] != null && data[name] != undefined) {
                val = data[name].replace(/00:00:00/g, "")
              }
              $(item).val(val)
            })
            var politicsstatusObj = ["群众", "团员", "预备党员", "党员", "其他"]
            $('input[name = politicsstatus]').each(function (index, item) {
              $(item).val(politicsstatusObj[index])
              if ($(item).val() == data.politicsstatus) {
                $(item).attr("checked")
              }
            })
            $('input[name = sex]').each(function(index,item){
              if(item.title == "男"){
              $(item).val("男")
              }
            })
            $('input[name = ismarriage]').each(function(index,item){
              if(item.title == "未婚"){
              $(item).val(false)
              }
            })
            $('input[name = ispostgraduatestudy]').each(function(index,item){
              if(item.title == "否"){
              $(item).val(false)
              }
            })
            console.log("入党身份dom")
            console.log(data.politicsstatus)
            $("#joinTheParty").removeClass("layui-hide")
            //回显培养方式/考试方式
            layui.use('form', function () {
              var form = layui.form;
              $("#pyfs option[value='" + data.educationselect + "']").attr("selected", "selected");
              $("#ksfs option[value='" + data.examination + "']").attr("selected", "selected");
              

              //监听入党时间选择
              //入党时间检测按钮，在选择群众/其他/团员时禁止选择入党时间
              if (data.politicsstatus == "群众" || data.politicsstatus == "其他") {
                $("#joinTheParty").addClass("layui-hide")
                $("#entryDang").addClass("layui-hide")
              } else {
                $("#joinTheParty").removeClass("layui-hide")
                $("#entryDang").removeClass("layui-hide")
              }
              $('input[name = politicsstatus][value = ' + data.politicsstatus + ']').attr("checked",
                "checked")
              //返现单选按钮
              /*单选回显*/
              if(data.sex=="男"){
                $("input[name = sex]").eq(0).attr("checked","checked");
              }else{
                $("input[name = sex]").eq(1).attr("checked","checked");
              }
              if(data.ismarriage){
                $("input[name = ismarriage]").eq(0).attr("checked","checked");
              }else{
                $("input[name = ismarriage]").eq(1).attr("checked","checked");
              }
              if(data.ispostgraduatestudy){
                $("input[name = ispostgraduatestudy]").eq(0).attr("checked","checked");
              }else{
                $("input[name = ispostgraduatestudy]").eq(1).attr("checked","checked");
              }
              form.render("radio")
              form.render('select');

            })
          }
        },
        err: function (res) {

        }
      })
    }



    // 监听表单信息
    layui.use('form', function () {
      var form = layui.form;
      //监听入党时间选择
      //入党时间检测按钮，在选择群众/其他/团员时禁止选择入党时间
      form.on('radio(party)', function (data) {
        var val = data.value
        console.log(data)
        if (val == "群众" || val == "其他") {
          $("#joinTheParty").addClass("layui-hide")
          $("#entryDang").addClass("layui-hide")
        } else {
          $("#joinTheParty").removeClass("layui-hide")
          $("#entryDang").removeClass("layui-hide")
        }
      });
      //监听提交
      form.on('submit(formDemo)', function (data) {
        /**
         * @userid 用户id
         * @type 区分学生教师
         * @family 亲属关系信息
         * @workUnit 工作经历信息
         * @education 教育背景信息
         */
        var family = getInforMessage($("#familyTable>tr"))
        // 工作信息 
        var workUnit = getInforMessage($("#workEntryTimeTable>tr"))
        // 学历
        var education = getInforMessage($("#educationEntryTimeTable>tr"))
        //获取userid
        var str = window.location.href
        var index = str.indexOf("=")
        var userid = str.substr((index + 1), 1)
        var typeIndex = str.lastIndexOf("=")
        var type = str.substr((typeIndex + 1), 1)
        var JsonData = data.field
        // data.educationendtime =
        JsonData["family"] = family
        JsonData["workunit"] = workUnit
        JsonData["education"] = education
        JsonData["id"] = window.ModifiyId
        JsonData["userid"] = window.ModifyUeserId
        JsonData["url"] = window.imgurl
        JsonData = addTime(JsonData)
        console.log(JsonData)

        $.ajax({
          url: baseUrl + "sys/stuinput/update",
          data: JsonData,
          type: "POST",
          success: function (res) {
            console.log(res)
            if (res.code == 0) {
              layer.msg('保存成功', {
                icon: 1,
                time: 2000 //2秒关闭（如果不配置，默认是3秒）
              }, function () {
                location.href = "../subPage/Homepage.html?id=" + userid + "&type=" + type + ""
              });
            }
          },
          err: function () {

          }
        })
        return false;
      });

    });


    //上传图片
    layui.use('upload', function () {
      var $ = layui.jquery
      var upload = layui.upload
      var uploadIndex = null
      //普通图片上传
      var uploadInst = upload.render({
        elem: '#StuUpload',
        accept: 'images',
        exts: 'jpg|png|gif|bmp|jpeg',
        url: baseUrl + 'sys/stuinput/upload',
        before: function (obj) {
          //预读本地文件示例，不支持ie8
          obj.preview(function (index, file, result) {
            $('#showPicture').attr('src', result); //图片链接（base64）
            uploadIndex = layer.load(2)
          });
        },
        done: function (res) {
          console.log(res)
          //上传成功
          if (res.code == 0) {
            window.imgurl = res.url
            layer.msg('上传成功', {
              icon: 1
            }, function () {
              layer.close(uploadIndex)
            });

          }
          //如果上传失败
          if (res.code > 0) {
            return layer.msg('上传失败');
          }

        },
        error: function () {
          //演示失败状态，并实现重传
          var displayPicture = $('#displayPicture');
          displayPicture.html(
            '<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>'
          );
          displayPicture.find('.demo-reload').on('click', function () {
            uploadInst.upload();
          });
        }
      });
    });
    //学历添加行
    function addTEducationTr(des, startTime, endTime, td1, td2, td3) {
      //获取表格下的所有tr个数 +1 后赋值给下一次创建的input元素作为开启时间对象使用
      var index = $('#' + des + '>tr').length
      var str =
        '<tr><td><div class=" layui-col-md12"><input type="text" name="' + td1 + index +
        '"   autocomplete="off"class="layui-input layBlur">'
      str +=
        '</div></td><td><div class=" layui-col-md12"><input type="text" name="' + td2 + index +
        '"   autocomplete="off"'
      str +=
        'class="layui-input layBlur"></div></td><td><div class=" layui-col-md12"><input type="text" lay-verify="required"  name="' +
        td3 + index +
        '" autocomplete="off" class="layui-input"></div></td><td><div class="layui-inline layui-col-md12"><input type="text" class="layui-input layBlur" name="' +
        startTime + '' + index + '" id="' +
        startTime + '' + index + '">'
      str +=
        '</div></td><td><div class="layui-inline layui-col-md12"><input type="text" class="layui-input layBlur" name="' +
        endTime + '' + index + '" id="' +
        endTime + '' + index +
        '"></div></td><td><button type="button" class="del layui-btn layui-btn-sm layui-btn-primary"><i class="layui-icon">&#xe640;</i> 删除</button></td></tr>'
      $("#" + des).append(str)
      layui.use('laydate', function () {
        var laydate = layui.laydate;
        laydate.render({
          elem: '#' + startTime + index //指定元素
        });
        laydate.render({
          elem: '#' + endTime + index //指定元素
        });
      })
      return false
    }
    //添加行
    function addTableTr(des, startTime, endTime, td1, td2) {
      //获取表格下的所有tr个数 +1 后赋值给下一次创建的input元素作为开启时间对象使用
      var index = $('#' + des + '>tr').length
      var str =
        '<tr><td><div class=" layui-col-md12 "><input type="text" name="' + (td1 + index) +
        '"   autocomplete="off"class="layui-input layBlur">'
      str +=
        '</div></td><td><div class=" layui-col-md12 "><input  type="text" name="' + (td2 + index) +
        '" autocomplete="off"'
      str +=
        'class="layui-input layBlur"></div></td><td><div class="layui-inline layui-col-md12 "><input  type="text" class="layui-input layBlur" name="' +
        startTime + '' + index + '" id="' +
        startTime + '' + index + '">'
      str +=
        '</div></td><td><div class="layui-inline layui-col-md12 "><input  type="text" class="layui-input layBlur" name="' +
        endTime + '' + index + '" id="' +
        endTime + '' + index +
        '"></div></td><td><button type="button" class="del layui-btn layui-btn-sm layui-btn-primary"><i class="layui-icon">&#xe640;</i> 删除</button></td></tr>'
      $("#" + des).append(str)
      layui.use('laydate', function () {
        var laydate = layui.laydate;
        laydate.render({
          elem: '#' + startTime + index //指定元素
        });
        laydate.render({
          elem: '#' + endTime + index //指定元素
        });
      })
      return false
    }
    // 家庭成员添加行
    function addFamliyTr(des, n1, n2, n3, n4, n5) {
      //获取表格下的所有tr个数 +1 后赋值给下一次创建的input元素作为开启时间对象使用
      var index = $('#' + des + '>tr').length
      var str = '<tr><td><div class=" layui-col-md12"><input type="text" lay-verify="required" name="' + n1 + index +
        '"    autocomplete="off"'
      str +=
        'class="layui-input"></div></td><td><div class=" layui-col-md12"><input type="text" lay-verify="required" name="' +
        n2 + index +
        '"    autocomplete="off"'
      str +=
        'class="layui-input"></div></td><td><div class=" layui-col-md12"><input type="text" lay-verify="required" name="' +
        n3 + index +
        '"    autocomplete="off"'
      str +=
        'class="layui-input"></div></td><td><div class=" layui-col-md12"><input type="text" lay-verify="required" name="' +
        n4 + index +
        '"    autocomplete="off"'
      str +=
        'class="layui-input"></div></td><td><div class=" layui-col-md12"><input type="text" lay-verify="required" name="' +
        n5 + index +
        '"    autocomplete="off"'
      str +=
        'class="layui-input"></div></td><td><button type="button" class="del layui-btn layui-btn-sm layui-btn-primary"><i class="layui-icon">&#xe640;</i> 删除</button></td></tr>'

      $("#" + des).append(str)

    }
    //处理table数据
    function getInforMessage(dom) {
      var strName = ""
      $(dom).each(function (index, item) {
        //tr层
        var trInput = $(item).find("input")
        $(trInput).each(function (index, item) {
          console.log(item)
          //td层
          if (index != trInput.length - 1) {
            if (item.value) {
              strName += item.name + ":" + item.value.replace(/00:00:00/g, "") + ","
            }

          } else {
            if (item.value) {
              strName += item.name + ":" + item.value.replace(/00:00:00/g, "") + "|"
            }
          }
        })
      })
      console.log("strName")
      console.log(strName)
      return strName

    }

    //添加时间结构
    function addTime(obj) {
      var arr = ["politicsstatusentrytime", "timeofenrollment", "timeofgraduation", "identitycardentity",
        "identitycarend", "protectionentry", "protectionend", "hkandmacaoentry", "hkandmacaoend", "taiwanentry",
        "taiwanend",
      ]
      // console.log("123")
      // console.log(obj)
      arr.forEach(function (item, index) {
        if (obj[item] != null && obj[item] != undefined && obj[item] != "") {
          obj[item] = obj[item].trim() + " 00:00:00"
        }
      })
      return obj
    }
    //解构数据  渲染数据
    function structure(obj, data) {
      // console.log(data.split(","))
      if (data) {
        var one = data.split("|")
        // console.log("解构数据")
        // console.log(one)
        one.forEach(function (_item, index) {
          var two = _item.split(",")
          two.forEach(function (__item, index) {
            var three = __item.split(":")
            // console.log(three)

            // console.log(three[0] + ":" + three[1])
            obj[three[0]] = three[1]
          })
        })
      }

    }
    //回显之前的 工作经历 学历 表格dom数据格式创建
    function handleStructure(des, data) {
      var obj = {}
      if (data) {
        var one = data.split("|")
        one.shift()
        one.pop()
        // console.log("解构数据")
        // console.log(one)
        one.forEach(function (_item, _index) {
          obj[_index] = []
          var two = _item.split(",")
          console.log("two")
          console.log(two)
          two.forEach(function (__item, index) {
            var three = __item.split(":")
            // console.log(three)
            console.log(three[0] + ":" + three[1])
            obj[_index].push(three[0])
          })
        })
        // console.log("-oobj-")
        // console.log(obj)
        for (key in obj) {
          console.log("KKK")
          console.log(key)
          HuiXianAddTableTr(des, obj[key][2], obj[key][3], obj[key][0], obj[key][1])
        }
      }
    }
    //  回显时的创建 工作经历 家庭成员 学历表格
    /**
     * @des 表单dom节点     需要填充的目标位置
     */
    function HuiXianAddTableTr(des, startTime, endTime, td1, td2) {
      //获取表格下的所有tr个数 +1 后赋值给下一次创建的input元素作为开启时间对象使用
      var index = $('#' + des + '>tr').length + 1
      var str =
        '<tr><td><div class=" layui-col-md12"><input type="text" name="' + td1 +
        '"   autocomplete="off"class="layui-input layBlur">'
      str +=
        '</div></td><td><div class=" layui-col-md12"><input type="text" name="' + td2 +
        '" autocomplete="off"'
      str +=
        'class="layui-input layBlur"></div></td><td><div class="layui-inline layui-col-md12"><input type="text" class="layui-input layBlur" name="' +
        startTime + '" id="' +
        startTime + index + '">'
      str +=
        '</div></td><td><div class="layui-inline layui-col-md12"><input type="text" class="layui-input layBlur" name="' +
        endTime + '" id="' +
        endTime + index +
        '"></div></td><td><button type="button" class="del layui-btn layui-btn-sm layui-btn-primary"><i class="layui-icon">&#xe640;</i> 删除</button></td></tr>'
      $("#" + des).append(str)
      console.log(startTime)
      console.log("=====")
      console.log(endTime)
      layui.use('laydate', function () {
        var laydate = layui.laydate;
        laydate.render({
          elem: '#' + startTime + index //指定元素
        });
        laydate.render({
          elem: '#' + endTime + index //指定元素
        });
      })
      return false
    }
    /**
     *  家庭成员回显
     * handleFamilyStructure 解构数据
     * HuiXianAddFamliyTr 回显数据
     */
    function handleFamilyStructure(des, data) {
      var obj = {}
      if (data) {
        var one = data.split("|")
        one.shift()
        one.pop()
        // console.log("解构数据")
        // console.log(one)
        one.forEach(function (_item, _index) {
          obj[_index] = []
          var two = _item.split(",")
          console.log("two")
          console.log(two)
          two.forEach(function (__item, index) {
            var three = __item.split(":")
            // console.log(three)
            console.log(three[0] + ":" + three[1])
            obj[_index].push(three[0])
          })
        })
        // console.log("-oobj-")
        // console.log(obj)
        for (key in obj) {
          console.log("KKK")
          console.log(obj[key])
          HuiXianAddFamliyTr(des, obj[key][0], obj[key][1], obj[key][2], obj[key][3], obj[key][4])
        }
      }
    }

    function HuiXianAddFamliyTr(des, n1, n2, n3, n4, n5) {
      //获取表格下的所有tr个数 +1 后赋值给下一次创建的input元素作为开启时间对象使用
      var index = $('#' + des + '>tr').length + 1
      var str = '<tr><td><div class=" layui-col-md12"><input type="text" name="' + n1 +
        '"    autocomplete="off"'
      str += 'class="layui-input layBlur"></div></td><td><div class=" layui-col-md12"><input type="text" name="' + n2 +
        '"    autocomplete="off"'
      str += 'class="layui-input layBlur"></div></td><td><div class=" layui-col-md12"><input type="text" name="' + n3 +
        '"    autocomplete="off"'
      str += 'class="layui-input layBlur"></div></td><td><div class=" layui-col-md12"><input type="text" name="' + n4 +
        '"    autocomplete="off"'
      str += 'class="layui-input layBlur"></div></td><td><div class=" layui-col-md12"><input type="text" name="' + n5 +
        '"    autocomplete="off"'
      str +=
        'class="layui-input layBlur"></div></td><td><button type="button" class="del layui-btn layui-btn-sm layui-btn-primary"><i class="layui-icon">&#xe640;</i> 删除</button></td></tr>'
      $("#" + des).append(str)
    }

    //登出操作
    function logOut() {
      $.ajax({
        url: baseUrl + "sys/login/signOut",
        type: "POST",
        data: {
          id: sessionStorage.getItem("loginUserId")
        },
        success: function (res) {
          if (res.code == 0) {
            sessionStorage.clear()
            location.href = "../subPage/login.html"
          }
        },
      })

    }
    //删除功能
    $('table').on("click", ".del", function (event) {
      console.log(event)
      var that = $(this)
      layer.confirm("确定要删除么", {
        icon: 3,
        title: "点击确认将删除此行"
      }, function (index) {
        that.parent().parent().remove()
        layer.close(index)
      })
    })
    // 新添加行校验-如果有一个填写 必须全填写  如果全部为空则取消校验
    $('table').on('blur', ".layBlur", function (event) {
      var that = $(this)
      var val = that.val()
      if (val) {
        that.attr('lay-verify', 'required')
          .parent()
          .parent()
          .siblings()
          .find("input")
          .attr('lay-verify', 'required')
      } else {
        var parent = that.parent().parent().siblings().find('input')
        var str = ""
        parent.each(function (index, item) {
          str += $(item).val()
        })
        if (str == "") {
          that.attr('lay-verify', '')
            .parent()
            .parent()
            .siblings()
            .find("input")
            .attr('lay-verify', '')
        }

      }
    })
  </script>


</body>

</html>